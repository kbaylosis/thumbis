{"name":"Thumbis","tagline":"A powerful opensource node-based thumbnailer server built for the Amazon S3 and CloudFront","body":"# thumbis.js\r\nA powerful opensource node-based thumbnailer server built for the Amazon S3 and CloudFront. It is running on top [gm.js](http://aheckmann.github.io/gm/).\r\n\r\n## Standard Usage\r\nThe gist of performing thumbnail requests to the server is as follows:\r\n\r\n```\r\nhttp://<server>/$resize/<width>/<height>/$path/<path of the image in the S3 bucket (excluding the bucket name)>\r\n```\r\n\r\nExample:\r\nResize the image to 100x100.\r\n\r\nhttp://d1abpi12089u098.cloudfront.net/$resize/100/100/$path/image.png\r\n\r\n## Other Uses\r\n\r\nNote that you can perform other functions that [gm.js](http://aheckmann.github.io/gm/) supports. \r\n\r\n### Resize and Flip the image\r\nResize the image to 100x100 then flip it.\r\nhttp://d1abpi12089u098.cloudfront.net/$resize/100/100/$flip/$path/image.png\r\n\r\n### Crop the image\r\nCrops a 50x50 image at (0,0).\r\nhttp://d1abpi12089u098.cloudfront.net/$crop/50/50/0/0/$path/image.png\r\n\r\n### There are more\r\nPlease read the [gm.js documentation](http://aheckmann.github.io/gm/docs.html), and try them out! \r\nJust remember that the url pattern is '$' prefix + gm function + parameters separated by forward slashes.\r\n\r\nSo for the border function that has the following spec:\r\n\r\n```javascript\r\ngm(\"img.png\").crop(width, height, x, y)\r\n```\r\n\r\nIt can be translated to...\r\n\r\n```javascript\r\n$crop/<width>/<height>/<x>/<y>/$path/img.png\r\n```\r\n\r\n## How to Setup\r\n1. Create an S3 bucket and set it as follows:\r\n\t* Set its permissions to allow Read/Write using a certain IAM user\r\n2. Create a load balancer.\r\n3. Create a Cloud Front web distribution and set it as follows:\r\n\t* Create an origin pointing to the S3 bucket in (1). Ensure that it is allowed access to that bucket.\r\n\t* Create an origin pointing to the load balancer in (2)\r\n\t* Create the following Behaviours in exactly the order below:\r\n\t\t- ‘\\*\\*/\\*’ - load balancer in (2)\r\n\t\t- ‘\\*\\*/\\*.jpg’ - S3 bucket in (1)\r\n\t\t- ‘\\*\\*/\\*.png’ - S3 bucket in (1)\r\n\t\t- ‘\\*\\*/\\*.jpeg’ - S3 bucket in (1)\r\n4. Create a stack in ops-works for the thumb system\r\n5. Create a Node.js App Server using the load balancer in item (1).\r\n6. Specify the ‘graphicsmagick’ package under the OS Packages of the Node.js App Server layer.\r\n7. Create at least one instance with the following specs:\r\n\tSize : t2.small or higher\r\n\tOperating System : Ubuntu 14.x7.\r\n8. Create an app for thumbis with the following settings:\r\n\t* Repository URL : git@github.com:kbaylosis/thumbis.git\r\n\t* Environment Variables :\r\n\t\t- PORT = 80\r\n\t\t- THUMBIS_S3KEY = AWS S3 Access Key\r\n\t\t- THUMBIS_S3SECRET = AWS S3 Secret Key\r\n\t\t- THUMBIS_BUCKETS = AWS S3 Bucket Array i.e. [\"bucketA\", \"bucketB\", \"bucketC\"]\r\n\t\t- THUMBIS_REGION = AWS Bucket region\r\n\t\t- THUMBIS_CFURL = AWS CloudFront distribution url\r\n9. Deploy the app.\r\n10. You may now upload files directly to S3 and read it using the Cloudfront distribution with a thumbnailing capability.\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}